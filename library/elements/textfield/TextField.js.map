{"version":3,"sources":["../../../source/javascript/elements/textfield/TextField.js"],"names":[],"mappings":"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","file":"TextField.js","sourcesContent":["import React, {PropTypes} from 'react';\nimport { findDOMNode } from 'react-dom';\nimport KlassName from 'teapan/klassName';\n\nimport shallowEqual from '../../helper/shallowEqual';\n\nimport TextFieldLabel from './TextFieldLabel';\nimport TextFieldHint from './TextFieldHint';\nimport EnhanceTextField from './EnhanceTextField';\n\nfunction isValid(value) {\n  return Boolean(value || value === 0);\n}\n\nclass TextField extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisFocused: false,\n\t\t\tisClean: true,\n\t\t\thasValue: false,\n\t\t\thelpText: undefined,\n\t\t};\n\t\tthis.handleInputBlur = this.handleInputBlur.bind(this);\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t\tthis.handleInputFocus = this.handleInputFocus.bind(this);\n\t\tthis.handleInputKeyDown = this.handleInputKeyDown.bind(this);\n\t\tthis.handleHeightChange = this.handleHeightChange.bind(this);\n\t}\n\n\tcomponentWillMount() {\n\t\tconst { children, name, helpText, hintText, labelText } = this.props;\n\n\t\tconst propsLeaf = children ? children.props : this.props;\n\n\t\tthis.setState({\n\t\t\thelpText: helpText,\n\t\t\thasValue: isValid(propsLeaf.value) || isValid(propsLeaf.defaultValue),\n\t\t});\n\n\t\tconst uniqueId = `${name}-${hintText}-${labelText}-${Math.floor(Math.random() * 0xFFFF)}`;\n\t\tthis.uniqueId = uniqueId.replace(/[^A-Za-z0-9-]/gi, '');\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.helpText !== this.props.helpText) {\n\t\t\tthis.setState({\n\t\t\t\thelpText: nextProps.helpText,\n\t\t\t});\n\t\t}\n\n\t\tif (nextProps.children && nextProps.children.props) {\n\t\t\tnextProps = nextProps.children.props;\n\t\t}\n\n\t\tif (nextProps.hasOwnProperty('value')) {\n\t\t\tconst hasValue = isValid(nextProps.value) || (this.state.isClean && isValid(nextProps.defaultValue));\n\n\t\tif (hasValue !== this.state.hasValue) {\n\t\t\t\tthis.setState({\n\t\t\t\t\thasValue: hasValue,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps, nextState, nextContext) {\n\t\treturn (\n\t\t\t!shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState) || !shallowEqual(this.context, nextContext)\n\t\t);\n\t}\n\n\tblur() {\n\t\tif (this.input) this.getInputNode().blur();\n\t}\n\n\tfocus() {\n\t\tif (this.input) this.getInputNode().focus();\n\t}\n\n\tselect() {\n\t\tif (this.input) this.getInputNode().select();\n\t}\n\n\tgetValue() {\n\t\treturn this.input ? this.getInputNode().value : undefined;\n\t}\n\n\tgetInputNode() {\n\t\treturn (this.props.children || this.props.longtext) ? this.input.getInputNode() : findDOMNode(this.input);\n\t}\n\n\thandleInputBlur(event) {\n\t\tthis.setState({isFocused: false});\n\t\tif (this.props.onBlur) this.props.onBlur(event);\n\t}\n\n\thandleInputChange(event) {\n\t\tthis.setState({hasValue: isValid(event.target.value), isClean: false});\n\t\tif (this.props.onChange) this.props.onChange(event, event.target.value);\n\t}\n\n\thandleInputFocus(event) {\n\t\tif (this.props.disabled) return;\n\t\tthis.setState({isFocused: true});\n\t\tif (this.props.onFocus) this.props.onFocus(event);\n\t}\n\n\thandleInputKeyDown(event) {\n\t\tif (event.keycode === 13 && this.props.onEnterKeyDown ) this.props.onEnterKeyDown(event);\n\t\tif (this.props.onKeyDown) this.props.onKeyDown(event);\n\t}\n\n\thandleHeightChange(event, height) {\n\t\tlet newHeight = height;\n\t\tif (this.props.labelText) {\n\t\t\tnewHeight += 30;\n\t\t}\n\t\tfindDOMNode(this).style.height = `${newHeight}px`;\n\t}\n\n\t_isControlled() {\n\t\treturn this.props.hasOwnProperty('value');\n\t}\n\n\trender() {\n\t\tconst props = this.props;\n\t\tconst {\n\t\t\tid,\n\t\t\ttype,\n\t\t\trows,\n\t\t\trowsMax,\n\t\t\tlongtext,\n\t\t\tdisabled,\n\t\t\tfixed,\n\t\t\tlabelText,\n\t\t\thintText,\n\t\t\tvalidateStatus,\n\t\t\tclassName,\n\t\t\tchildren,\n\t\t\t...others\n\t\t} = props;\n\n\t\tconst klassName = KlassName('field',{\n\t\t\t['hidden']:('type' in props && type === 'hidden' ),\n\t\t\t['disabled']:('disabled' in props && disabled !== false ),\n\t\t\t['visited']:(this.state.hasValue && this.state.isFocused === false),\n\t\t\t['focused']:(this.state.isFocused),\n\t\t\t['field--success']:(validateStatus === 'success'),\n\t\t\t['field--warning']:(validateStatus === 'warning'),\n\t\t\t['field--error']:(validateStatus === 'error'),\n\t\t},className);\n\n\t\tconst inputId = id || this.uniqueId;\n\n\t\tconst labelTextElement = labelText && (\n\t\t\t<TextFieldLabel\n\t\t\t\thtmlFor={inputId}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tfixed={fixed}\n\t\t\t>\n\t\t\t\t{labelText} {validateStatus === 'validating' ? <span>...</span> : null}\n\t\t\t</TextFieldLabel>\n\t\t);\n\n\t\tconst inputProps = {\n\t\t\tid: inputId,\n\t\t\tref: (elem) => this.input = elem,\n\t\t\tdisabled: disabled,\n\t\t\tonBlur: this.handleInputBlur,\n\t\t\tonChange: this.handleInputChange,\n\t\t\tonFocus: this.handleInputFocus,\n\t\t\tonKeyDown: this.handleInputKeyDown,\n\t\t};\n\n\t\tlet inputElement;\n\t\tif (children) {\n\t\t\tinputElement = React.cloneElement(this.props.children, {\n\t\t\t\t...inputProps,\n\t\t\t\t...children.props,\n\t\t\t});\n\t\t} else {\n\t\t\tinputElement = longtext ? (\n\t\t\t\t<EnhanceTextField\n\t\t\t\t\t{...others}\n\t\t\t\t\t{...inputProps}\n\t\t\t\t\trows={rows}\n\t\t\t\t\trowsMax={rowsMax}\n\t\t\t\t\tonHeightChange={this.handleHeightChange}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<div className='field-control'>\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...others}\n\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tclassName='field-control-text'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\t{...others}\n\t\t\t\tdata-teadot='field'\n\t\t\t\tclassName={klassName}\n\t\t\t>\n\t\t\t\t{labelTextElement}\n\t\t\t\t{hintText ?\n\t\t\t\t\t<TextFieldHint\n\t\t\t\t\t\ttext={hintText}\n\t\t\t\t\t\tshow={!(this.state.hasValue || (labelText && !this.state.isFocused)) || (!this.state.hasValue && labelText && fixed && !this.state.isFocused)}\n\t\t\t\t\t/> : null\n\t\t\t\t}\n\t\t\t\t{inputElement}\n\t\t\t\t{(validateStatus && validateStatus !== 'validating') ?\n\t\t\t\t\t<div className='field-help'>{this.state.helpText}</div> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nTextField.propTypes = {\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\ttype: PropTypes.string,\n\tvalue: PropTypes.any,\n\tclassName: PropTypes.string,\n\tchildren: PropTypes.node,\n\tdefaultValue: PropTypes.any,\n\tvalidateStatus: PropTypes.oneOf(['validating','success','warning','error']),\n\n\tdisabled: PropTypes.bool,\n\tfixed: PropTypes.bool,\n\tlongtext: PropTypes.bool,\n\n\thelpText: PropTypes.node,\n\tlabelText: PropTypes.node,\n\thintText: PropTypes.node,\n\n\trows: PropTypes.string,\n\trowsMax: PropTypes.string,\n\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onKeyPress: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onEnterKeyDown: PropTypes.func,\n};\n\nTextField.defaultProps = {\n\tdisabled: false,\n\tfixed: false,\n\tlongtext: false,\n\ttype: 'text',\n\trows: '4',\n};\n\nexport default TextField;"]}