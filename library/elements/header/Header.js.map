{"version":3,"sources":["../../../source/javascript/elements/header/Header.js"],"names":[],"mappings":"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","file":"Header.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport KlassName from 'teapan/klassName';\nimport { SKINS } from '../../constant/props';\n\nimport Icon from '../icon/Icon';\nimport Button from '../button/Button';\nimport Warpper from '../warpper/Warpper';\n\nimport HeaderNavbar from './HeaderNavbar';\nimport HeaderChatbar from './HeaderChatbar';\n\nconst noop = () => {};\n\nclass Header extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tadvanced: props.advanced,\n\t\t\tflipped: props.flipped,\n\t\t};\n\n\t\tthis.handleControlClick = this.handleControlClick.bind(this);\n\t\tthis.handleControlKeyDown = this.handleControlKeyDown.bind(this);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.setState({\n\t\t\tflipped: nextProps.flipped,\n\t\t});\n\t}\n\n\thandleControlClick(event) {\n\n\t\tlet node = event.target;\n\n\t\tdo {\n\t\t\tif (this.isHeaderControlNode(node)) {\n\t\t\t\tthis.setFlipped();\n\t\t\t\treturn;\n\t\t\t}\n\t\t} while ((node = node.parentNode) !== null);\n\t}\n\n\thandleControlKeyDown(event) {\n\t\tif (this.isHeaderControlNode(event.target)) {\n\t\t\tif (event.keyCode === 13) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.setFlipped();\n\t\t\t}\n\t\t}\n\t}\n\n\tisHeaderControlNode(node) {\n\t\treturn node.getAttribute('role') === 'control';\n\t}\n\n\tsetFlipped() {\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped,\n\t\t});\n\n\t\tif (typeof this.props.onFlip === 'function') {\n\t\t\tthis.props.onFlip();\n\t\t}\n\t}\n\n\trenderControl() {\n\t\treturn (\n\t\t\t<div className=\"header-control\">\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\tkind=\"hollow\"\n\t\t\t\t\trole=\"control\"\n\t\t\t\t\ttabIndex={0}\n\t\t\t\t\tonClick={this.handleControlClick}\n\t\t\t\t\tonKeyDown={this.handleControlKeyDown}\n\t\t\t\t>\n\t\t\t\t\t<Icon name=\"repost\" />\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderChildren() {\n\t\treturn React.Children.map(this.props.children, (child) => {\n\t\t\tif (child === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst advanced = this.props.advanced;\n\t\t\tconst flipped = this.state.flipped;\n\n\t\t\treturn React.cloneElement(child, {\n\t\t\t\tadvanced,\n\t\t\t\tflipped\n\t\t\t});\n\t\t}) ;\n\t}\n\n\trender() {\n\t\tconst props = this.props;\n\t\tconst {\n\t\t\tskin,\n\t\t\tclassName,\n\t\t\t...others\n\t\t} = props;\n\n\t\tconst fatherKlassName = KlassName('layout-header',{\n\t\t\t['layout-header--' + skin]:skin,\n\t\t},className);\n\n\t\tconst klassName = KlassName(\n\t\t\t'header',\n\t\t\t'clearfix',\n\t\t\t{\n\t\t\t\t['advanced']:this.state.advanced,\n\t\t\t\t['flipped']:this.state.flipped,\n\t\t\t},\n\t\tclassName\n\t\t);\n\n\t\treturn (\n\t\t\t<div className={fatherKlassName}>\n\t\t\t\t<Warpper>\n\t\t\t\t\t<div\n\t\t\t\t\t\t{...others}\n\t\t\t\t\t\tclassName={klassName}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ this.state.advanced ? this.renderControl() : null }\n\t\t\t\t\t\t{ this.renderChildren() }\n\t\t\t\t\t</div>\n\t\t\t\t</Warpper>\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nfunction affirmChildrenPropTypes(props, propName) {\n\tlet error;\n\tlet navbarsCount = 0;\n\tlet chatbarsCount = 0;\n\tconst children = props[propName];\n\n\tReact.Children.forEach(children, (child) => {\n\t\tif (child === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (child.type === HeaderNavbar) {\n\t\t\tnavbarsCount++ ;\n\t\t} else if (child.type === HeaderChatbar) {\n\t\t\tchatbarsCount++ ;\n\t\t} else {\n\t\t\terror = new Error(\n\t\t\t\t'Expected `HeaderNavbar` or `HeaderChatbar` not found `' + (child.type.displayName || child.type) + '`'\n\t\t\t);\n\t\t}\n\n\t});\n\n\tif (navbarsCount > 1 || chatbarsCount > 1) {\n\t\terror = new Error(\n\t\t\t'There should have only one `HeaderNavbar` or `HeaderChatbar`  component`. '\n\t\t);\n\t}\n\n\treturn error;\n};\n\nHeader.propTypes = {\n\tflipped: PropTypes.bool,\n\tadvanced: PropTypes.bool,\n\tskin: PropTypes.oneOf(SKINS),\n\tclassName: PropTypes.string,\n\tchildren: affirmChildrenPropTypes,\n\n\tonFlip: PropTypes.func\n};\n\nHeader.defaultProps = {\n\tflipped: false,\n\tadvanced: false,\n\tonFlip: noop\n};\n\nexport default Header;"]}