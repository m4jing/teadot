{"version":3,"sources":["../../../source/javascript/elements/dropdown/Dropdown.js"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AAEA;;;;;;;;;;;;;;;;IAEM;;;AACL,UADK,QACL,CAAY,KAAZ,EAAmB;wBADd,UACc;;qEADd,qBAEE,QADY;;AAElB,QAAK,KAAL,GAAa;AACZ,cAAW,MAAM,SAAN;GADZ,CAFkB;;AAMlB,QAAK,mBAAL,GAA2B,MAAK,mBAAL,CAAyB,IAAzB,OAA3B,CANkB;AAOlB,QAAK,kBAAL,GAA0B,MAAK,kBAAL,CAAwB,IAAxB,OAA1B,CAPkB;;EAAnB;;cADK;;sCAWe;AACnB,UAAO,gBAAP,CAAyB,OAAzB,EAAkC,KAAK,kBAAL,CAAlC,CADmB;;;;yCAIG;AACtB,UAAO,mBAAP,CAA4B,OAA5B,EAAqC,KAAK,kBAAL,CAArC,CADsB;;;;+BAIX;AACX,QAAK,QAAL,CAAc;AACb,eAAW,KAAX;IADD,EADW;AAIX,OAAI,KAAK,KAAL,CAAW,MAAX,EAAmB;AACtB,SAAK,KAAL,CAAW,MAAX,GADsB;IAAvB;;;;+BAKW;AACX,QAAK,QAAL,CAAc;AACb,eAAW,IAAX;IADD,EADW;AAIX,OAAI,KAAK,KAAL,CAAW,MAAX,EAAmB;AACtB,SAAK,KAAL,CAAW,MAAX,GADsB;IAAvB;;;;qCAKmB,OAAO;AAC1B,OAAM,kBAAkB,2BAAa,IAAb,CAAlB,CADoB;AAE1B,OAAI,MAAM,MAAN,KAAiB,eAAjB,IAAoC,CAAC,gBAAgB,QAAhB,CAA0B,MAAM,MAAN,CAA3B,IAA6C,KAAK,KAAL,CAAW,SAAX,EAAsB;AAC1G,SAAK,UAAL,GAD0G;IAA3G;;;;sCAKoB,OAAO;AAC3B,SAAM,cAAN,GAD2B;AAE3B,OAAI,KAAK,KAAL,CAAW,SAAX,EAAsB;AACzB,SAAK,UAAL,GADyB;IAA1B,MAEO;AACN,SAAK,UAAL,GADM;IAFP;;;;mCAOgB;;;AAChB,UAAO,gBAAM,QAAN,CAAe,GAAf,CAAoB,KAAK,KAAL,CAAW,QAAX,EAAqB,UAAE,KAAF,EAAa;AAC5D,QAAI,UAAU,IAAV,EAAgB;AACnB,YAAO,IAAP,CADmB;KAApB;;AAIA,QAAI,MAAM,IAAN,8BAAJ,EAAoC;AACnC,aAAQ,gBAAM,YAAN,CAAoB,KAApB,EAA2B;AAClC,YAAM,OAAK,KAAL,CAAW,IAAX;AACN,iBAAW,OAAK,KAAL,CAAW,SAAX;AACX,eAAS,OAAK,mBAAL;MAHF,CAAR,CADmC;KAApC;AAOA,WAAO,KAAP,CAZ4D;IAAb,CAAhD,CADgB;;;;2BAiBR;;;AACR,OAAM,QAAQ,KAAK,KAAL,CADN;OAGP,YAGG,MAHH,UAHO;OAIP,OAEG,MAFH,KAJO;;OAKJ,kCACA,8BANI;;AAQR,OAAM,YAAY,yBACjB,UADiB,gDAGf,aAAa,KAAK,KAAL,CAAW,SAAX,+BACb,eAAe,IAAf,EAAqB,kBAJN,EAMjB,SANiB,CAAZ,CARE;;AAiBR,UACC;;iBAAS,UAAQ,WAAW,SAAX,GAAjB;IACE,KAAK,cAAL,EADF;IADD,CAjBQ;;;;QAtEJ;;;AA6FL;;AAED,SAAS,SAAT,GAAqB;AACpB,YAAW,iBAAU,IAAV;AACX,YAAW,iBAAU,MAAV;AACX,WAAU,iBAAU,GAAV;;AAEV,OAAM,iBAAU,KAAV,CAAgB,CAAC,MAAD,EAAQ,QAAR,CAAhB,CAAN;;AAEA,SAAQ,iBAAU,IAAV;AACR,SAAQ,iBAAU,IAAV;CART;;AAWA,SAAS,YAAT,GAAwB,EAAxB;;kBAGe","file":"Dropdown.js","sourcesContent":["import React, { PropTypes, Component } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport KlassName from 'teapan/klassName';\n\nimport DropdownTrigger from './DropdownTrigger';\n\nclass Dropdown extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tactivated: props.activated,\n\t\t};\n\n\t\tthis._handleTriggerClick = this._handleTriggerClick.bind(this);\n\t\tthis._handleWindowClick = this._handleWindowClick.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener( 'click', this._handleWindowClick );\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener( 'click', this._handleWindowClick );\n\t}\n\n\thandleHide(){\n\t\tthis.setState({\n\t\t\tactivated: false\n\t\t});\n\t\tif( this.props.onHide ){\n\t\t\tthis.props.onHide();\n\t\t}\n\t}\n\n\thandleShow(){\n\t\tthis.setState({\n\t\t\tactivated: true\n\t\t});\n\t\tif( this.props.onShow ){\n\t\t\tthis.props.onShow();\n\t\t}\n\t}\n\n\t_handleWindowClick( event ){\n\t\tconst dropdownElement = findDOMNode( this );\n\t\tif( event.target !== dropdownElement && !dropdownElement.contains( event.target ) && this.state.activated ){\n\t\t\tthis.handleHide();\n\t\t}\n\t}\n\n\t_handleTriggerClick( event ){\n\t\tevent.preventDefault();\n\t\tif( this.state.activated ){\n\t\t\tthis.handleHide();\n\t\t} else {\n\t\t\tthis.handleShow();\n\t\t}\n\t}\n\n\trenderChildren() {\n\t\treturn React.Children.map( this.props.children, ( child ) => {\n\t\t\tif (child === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif( child.type === DropdownTrigger ){\n\t\t\t\tchild = React.cloneElement( child, {\n\t\t\t\t\ttype: this.props.type,\n\t\t\t\t\tactivated: this.state.activated,\n\t\t\t\t\tonClick: this._handleTriggerClick\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn child;\n\t\t});\n\t}\n\n\trender() {\n\t\tconst props = this.props;\n\t\tconst {\n\t\t\tclassName,\n\t\t\ttype,\n\t\t\t...others\n\t\t} = props;\n\n\t\tconst klassName = KlassName(\n\t\t\t'dropdown',\n\t\t\t{\n\t\t\t\t['activated']:this.state.activated,\n\t\t\t\t['dropdown--' + type]:type,\n\t\t\t},\n\t\t\tclassName\n\t\t);\n\n\t\treturn (\n\t\t\t<div {...others} className={klassName}>\n\t\t\t\t{this.renderChildren()}\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nDropdown.propTypes = {\n\tactivated: PropTypes.bool,\n\tclassName: PropTypes.string,\n\tchildren: PropTypes.any,\n\n\ttype: PropTypes.oneOf(['menu','navbar']),\n\n\tonHide: PropTypes.func,\n\tonShow: PropTypes.func\n};\n\nDropdown.defaultProps = {\n};\n\nexport default Dropdown;"]}