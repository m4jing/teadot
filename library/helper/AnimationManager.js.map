{"version":3,"sources":["../../source/javascript/helper/AnimationManager.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;;;;;AAEA,SAAS,KAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB;AACnB,OAAK,IAAL,CAAU,CAAV,EAAa,UAAS,CAAT,EAAY,CAAZ,EAAe;AAC1B,MAAE,CAAF,IAAO,CAAP,CAD0B;GAAf,CAAb,CADmB;AAInB,SAAO,CAAP,CAJmB;CAArB;;AAOA,SAAS,aAAT,GAAyB;AACvB,MAAI,0BAA0B;AAC5B,sBAAkB,qBAAlB;AACA,mBAAe,eAAf;AACA,iBAAa,+BAAb;AACA,gBAAY,eAAZ;GAJE,CADmB;AAOvB,MAAI,CAAC,+BAAqB,SAArB,EAAgC;AACnC,WAAO,uBAAP,CADmC;GAArC;AAGA,MAAI,KAAK,SAAS,aAAT,CAAuB,KAAvB,CAAL,CAVmB;;AAYvB,OAAK,IAAI,IAAJ,IAAY,uBAAjB,EAA0C;AACxC,QAAI,GAAG,KAAH,CAAS,IAAT,MAAmB,SAAnB,EAA8B;AAChC,aAAO,wBAAwB,IAAxB,CAAP,CADgC;KAAlC;GADF;AAKA,SAAO,KAAP,CAjBuB;CAAzB;;AAoBA,IAAI,qBAAqB,eAArB;;AAEJ,IAAM,WAAW,CAAC,QAAD,EAAW,KAAX,EAAkB,IAAlB,EAAwB,GAAxB,EAA6B,EAA7B,CAAX;;IAEe;AACnB,WADmB,gBACnB,GAAc;0BADK,kBACL;;AACZ,SAAK,eAAL,YAA6B,qBAAqB,CAArB,GAAyB,CAAzB,eAA7B,CADY;GAAd;;eADmB;;6BAKV,SAAS;AAChB,YAAM,IAAN,EAAY,OAAZ,EADgB;AAEhB,aAAO,KAAK,KAAK,eAAL,CAAL,EAAP,CAFgB;;;;oCAKF;AACd,UAAI,QAAQ,EAAR,CADU;AAEd,YAAM,KAAK,mBAAL,CAAN,GAAqC,KAAK,QAAL,CAAc,CAAd,QAArC,CAFc;AAGd,YAAM,KAAK,iBAAL,CAAN,GAAmC,KAAK,QAAL,CAAc,CAAd,QAAnC,CAHc;;AAKd,WAAK,YAAL,CAAkB,KAAlB,EALc;AAMd,aAAO,KAAP,CANc;;;;oCASA;;;AACd,UAAI,QAAQ,EAAR,CADU;;AAGd,eAAS,GAAT,CAAa,UAAC,MAAD,EAAY;AACvB,YAAI,UAAJ;YAAO,UAAP,CADuB;;AAGvB,YAAI,MAAK,mBAAL,KAA6B,OAA7B,EAAsC;AACxC,cAAI,MAAK,cAAL,GAAsB,MAAK,IAAL,CAAU,KAAV,GAAkB,MAAK,QAAL,CAAc,CAAd,CAAxC,CADoC;SAA1C,MAEO;AACL,cAAI,MAAK,QAAL,CAAc,CAAd,CAAJ,CADK;SAFP;;AAMA,YAAI,MAAK,iBAAL,KAA2B,QAA3B,EAAqC;AACvC,cAAI,MAAK,eAAL,GAAuB,MAAK,IAAL,CAAU,MAAV,GAAmB,MAAK,QAAL,CAAc,CAAd,CAA1C,CADmC;SAAzC,MAEO;AACL,cAAI,MAAK,QAAL,CAAc,CAAd,CAAJ,CADK;SAFP;;AAMA,cAAS,oBAAT,qBAA6C,aAAQ,YAArD,CAfuB;OAAZ,CAAb,CAHc;;AAsBd,WAAK,YAAL,CAAkB,KAAlB,EAtBc;AAuBd,aAAO,KAAP,CAvBc;;;;iCA0BH,OAAO;;;AAClB,UAAI,CAAC,KAAK,cAAL,EAAqB;AACxB,iBAAS,GAAT,CAAa,UAAC,MAAD,EAAY;AACvB,gBAAS,6BAAT,IAA0C,OAAK,kBAAL,MAA1C,CADuB;AAEvB,gBAAS,mCAAT,IAA6C,OAAK,wBAAL,CAFtB;SAAZ,CAAb,CADwB;OAA1B;;;;SA9CiB","file":"AnimationManager.js","sourcesContent":["import ExecutionEnvironment from './ExecutionEnvironment';\n\nfunction merge(r, s) {\n  this.each(s, function(v, k) {\n    r[k] = v;\n  });\n  return r;\n};\n\nfunction transitionEnd() {\n  let transitionEndEventNames = {\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'transitionend',\n    OTransition: 'oTransitionEnd otransitionend',\n    transition: 'transitionend'\n  };\n  if (!ExecutionEnvironment.canUseDOM) {\n    return transitionEndEventNames;\n  }\n  let el = document.createElement('pin');\n\n  for (let name in transitionEndEventNames) {\n    if (el.style[name] !== undefined) {\n      return transitionEndEventNames[name];\n    }\n  }\n  return false;\n}\n\nlet ifHasTransitionEnd = transitionEnd();\n\nconst prefixes = ['Webkit', 'Moz', 'ms', 'O', ''];\n\nexport default class AnimationManager {\n  constructor() {\n    this.animationHandle = `css${ifHasTransitionEnd ? 3 : 2}Animation`;\n  }\n\n  generate(options) {\n    merge(this, options);\n    return this[this.animationHandle]();\n  }\n\n  css2Animation() {\n    var style = {};\n    style[this.horizontalDirection] = `${this.position[0]}px`;\n    style[this.verticalDirection] = `${this.position[1]}px`;\n\n    this.mixAnimation(style);\n    return style;\n  }\n\n  css3Animation() {\n    var style = {};\n\n    prefixes.map((prefix) => {\n      let x, y;\n\n      if (this.horizontalDirection === 'right') {\n        x = this.containerWidth - this.size.width - this.position[0];\n      } else {\n        x = this.position[0];\n      }\n\n      if (this.verticalDirection === 'bottom') {\n        y = this.containerHeight - this.size.height - this.position[1];\n      } else {\n        y = this.position[1];\n      }\n\n      style[`${prefix}Transform`] = `translate3d(${x}px, ${y}px, 0)`;\n\n    });\n\n    this.mixAnimation(style);\n    return style;\n  }\n\n  mixAnimation(style) {\n    if (!this.closeAnimation) {\n      prefixes.map((prefix) => {\n        style[`${prefix}TransitionDuration`] = `${this.transitionDuration}s`;\n        style[`${prefix}TransitionTimingFunction`] = this.transitionTimingFunction;\n      });\n    }\n  }\n}"]}