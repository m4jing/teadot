{"version":3,"sources":["../../../source/javascript/enhance/overlay/Overlay.js"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;;;;;;;;;;;;;IAEM;;;AACL,UADK,OACL,CAAY,KAAZ,EAAmB;wBADd,SACc;;qEADd,oBAEE,QADY;;AAElB,QAAK,YAAL,GAAoB,MAAK,YAAL,CAAkB,IAAlB,OAApB,CAFkB;;EAAnB;;cADK;;sCAMe;AACnB,OAAI,KAAK,KAAL,CAAW,SAAX,EAAsB;AACzB,SAAK,cAAL,GAAsB,SAAS,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA1C,CAAtB,CADyB;IAA1B;;;;uCAKoB;AACpB,OAAI,KAAK,KAAL,CAAW,SAAX,IAAwB,CAAC,KAAK,cAAL,EAAqB;AACjD,SAAK,cAAL,GAAsB,SAAS,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA1C,CAAtB,CADiD;IAAlD;;;;yCAKuB;AACvB,OAAI,KAAK,cAAL,EAAqB;AACxB,aAAS,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,KAAK,YAAL,CAA7C,CADwB;AAExB,SAAK,cAAL,GAAsB,IAAtB,CAFwB;IAAzB;;;;+BAMa,OAAO;AACpB,OAAI,KAAK,KAAL,CAAW,SAAX,IAAwB,KAAK,KAAL,CAAW,YAAX,IAA2B,MAAM,KAAN,KAAgB,EAAhB,EAAoB;AAC1E,SAAK,KAAL,CAAW,YAAX,CAAwB,KAAxB,EAD0E;IAA3E;;;;2BAKQ;;;AACR,OAAM,QAAQ,KAAK,KAAL,CADN;OAGP,OAOG,MAPH,KAHO;OAIP,YAMG,MANH,UAJO;OAKP,YAKG,MALH,UALO;OAMP,YAIG,MAJH,UANO;OAOP,WAGG,MAHH,SAPO;OAQP,UAEG,MAFH,QARO;;OASJ,kCACA,+EAVI;;AAYR,OAAM,YAAY,yBAAU,SAAV,gDAChB,cAAc,IAAd,EAAoB,mCACpB,aAAc,eAAe,KAAf,IAAwB,cAAc,KAAd,+BACtC,aAAc,eAAe,KAAf,IAAwB,cAAc,KAAd,cAHtB,EAIhB,SAJgB,CAAZ,CAZE;;AAkBR,UACC;;;IACC;;kBACK;AACJ,iBAAW,SAAX;OAFD;KAIC,uCAAK,WAAU,cAAV,EAAyB,SAAS,OAAT,EAA9B,CAJD;KAKC;;QAAK,WAAU,iBAAV,EAAL;MACE,QADF;MALD;KADD;IADD,CAlBQ;;;;QA/BJ;;;AAgEL;;AAED,QAAQ,SAAR,GAAoB;AACnB,YAAW,iBAAU,IAAV;AACX,YAAW,iBAAU,IAAV;;AAEX,OAAM,iBAAU,KAAV,CAAgB,CAAC,OAAD,EAAS,QAAT,CAAhB,CAAN;;AAEA,YAAW,iBAAU,MAAV;AACX,WAAU,iBAAU,IAAV;;AAEP,UAAS,iBAAU,IAAV;AACT,eAAc,iBAAU,IAAV;CAVlB;;AAaA,QAAQ,YAAR,GAAuB;AACtB,YAAW,KAAX;CADD;;kBAIe","file":"Overlay.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport KlassName from 'teapan/klassName';\n\nimport Portal from '../portal/index';\n\nclass Overlay extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleEscKey = this.handleEscKey.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.activated) {\n\t\t\tthis.escKeyListener = document.body.addEventListener('keydown', this.handleEscKey.bind(this));\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.props.activated && !this.escKeyListener) {\n\t\t\tthis.escKeyListener = document.body.addEventListener('keydown', this.handleEscKey.bind(this));\n\t\t}\n\t}\n\n\tcomponentWillUnmount () {\n\t\tif (this.escKeyListener) {\n\t\t\tdocument.body.removeEventListener('keydown', this.handleEscKey);\n\t\t\tthis.escKeyListener = null;\n\t\t}\n\t}\n\n\thandleEscKey (event) {\n\t\tif (this.props.activated && this.props.onEscKeyDown && event.which === 27) {\n\t\t\tthis.props.onEscKeyDown(event);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst props = this.props;\n\t\tconst {\n\t\t\ttype,\n\t\t\tactivated,\n\t\t\tinvisible,\n\t\t\tclassName,\n\t\t\tchildren,\n\t\t\tonClick,\n\t\t\t...others\n\t\t} = props;\n\n\t\tconst klassName = KlassName('overlay',{\n\t\t\t['overlay--' + type]:type,\n\t\t\t['activated']:('activated' in props && activated !== false),\n\t\t\t['invisible']:('invisible' in props && invisible !== false),\n\t\t},className);\n\n\t\treturn (\n\t\t\t<Portal>\n\t\t\t\t<div\n\t\t\t\t\t{...others}\n\t\t\t\t\tclassName={klassName}\n\t\t\t\t>\n\t\t\t\t\t<div className='overlay-mask' onClick={onClick} />\n\t\t\t\t\t<div className='overlay-warpper'>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Portal>\n\t\t);\n\t}\n\n};\n\nOverlay.propTypes = {\n\tactivated: PropTypes.bool,\n\tinvisible: PropTypes.bool,\n\n\ttype: PropTypes.oneOf(['modal','dialog']),\n\n\tclassName: PropTypes.string,\n\tchildren: PropTypes.node,\n\n    onClick: PropTypes.func,\n    onEscKeyDown: PropTypes.func\n};\n\nOverlay.defaultProps = {\n\tinvisible: false,\n};\n\nexport default Overlay;"]}