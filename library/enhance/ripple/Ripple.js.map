{"version":3,"sources":["../../../source/javascript/enhance/ripple/Ripple.js"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;AAEA,IAAM,eAAe;AACnB,WAAU,KAAV;AACA,YAAW,EAAX;AACA,SAAQ,CAAR;CAHI;;AAMN,IAAM,SAAS,SAAT,MAAS,GAAkB;KAAjB,gEAAU,kBAAO;;0CAMxB,cAAiB,SANO;;KAErB,wCAAV,SAF+B;KAGpB,yCAAX,UAH+B;KAIvB,sCAAR,OAJ+B;;KAK5B,6FAL4B;;AAQhC,QAAO,UAAE,iBAAF,EAAyB;;;AAC/B;aAAa;;AAmBZ,YAnBY,gBAmBZ,CAAY,KAAZ,EAAmB;0BAnBP,kBAmBO;;uEAnBP,6BAoBL,QADY;;AAElB,UAAK,KAAL,GAAa;AACZ,gBAAW,KAAX;AACA,iBAAY,KAAZ;AACA,WAAM,IAAN;AACA,UAAK,IAAL;AACA,YAAO,IAAP;KALD,CAFkB;AASlB,UAAK,SAAL,GAAiB,MAAK,SAAL,CAAe,IAAf,OAAjB,CATkB;AAUlB,UAAK,KAAL,GAAa,MAAK,KAAL,CAAW,IAAX,OAAb,CAVkB;AAWlB,UAAK,eAAL,GAAuB,MAAK,eAAL,CAAqB,IAArB,OAAvB,CAXkB;;IAAnB;;gBAnBY;;gCAiCA;AACX,cAAS,mBAAT,CAA6B,KAAK,KAAL,GAAa,UAAb,GAA0B,SAA1B,EAAqC,KAAK,SAAL,CAAlE,CADW;AAEX,UAAK,QAAL,CAAc,EAAC,WAAW,KAAX,EAAf,EAFW;;;;gCAKyB;;;SAA9B,mBAA8B;SAAvB,mBAAuB;SAAf,8DAAQ,qBAAO;;AACpC,SAAI,CAAC,KAAK,iCAAL,CAAuC,KAAvC,CAAD,EAAgD;AACnD,WAAK,KAAL,GAAa,KAAb,CADmD;AAEnD,eAAS,gBAAT,CAA0B,KAAK,KAAL,GAAa,UAAb,GAA0B,SAA1B,EAAqC,KAAK,SAAL,CAA/D,CAFmD;;4BAGxB,KAAK,cAAL,CAAoB,KAApB,EAA2B,KAA3B,EAHwB;;UAG5C,0BAH4C;UAGvC,4BAHuC;UAGjC,8BAHiC;;AAInD,WAAK,QAAL,CAAc,EAAC,WAAW,KAAX,EAAkB,YAAY,IAAZ,EAAkB,QAArC,EAA0C,UAA1C,EAAgD,YAAhD,EAAd,EAAsE,YAAM;AAC3E,cAAK,IAAL,CAAU,MAAV,CAAiB,WAAjB,CAD2E;AAE3E,cAAK,QAAL,CAAc,EAAC,WAAW,IAAX,EAAiB,YAAY,KAAZ,EAAhC,EAF2E;OAAN,CAAtE,CAJmD;MAApD;;;;sDAWiC,OAAO;AACxC,YAAO,KAAK,KAAL,IAAc,CAAC,KAAD,CADmB;;;;mCAIzB,OAAO,OAAO;iCACM,mBAAS,WAAT,CAAqB,IAArB,EAA2B,qBAA3B,GADN;;SACtB,kCADsB;SAChB,gCADgB;SACX,sCADW;SACH,oCADG;kBAE4B,KAAK,KAAL,CAF5B;SAEN,kBAAhB,eAFsB;SAEkB,gBAAd,aAFJ;;AAG7B,YAAO;AACN,YAAM,WAAW,CAAX,GAAe,QAAQ,IAAR,GAAe,QAAQ,CAAR,GAAY,OAAO,OAAP;AAChD,WAAK,WAAW,CAAX,GAAe,QAAQ,GAAR,GAAc,SAAS,CAAT,GAAa,OAAO,OAAP;AAC/C,aAAO,QAAQ,MAAR;MAHR,CAH6B;;;;oCAUd,OAAO;AACtB,SAAI,CAAC,KAAK,KAAL,CAAW,QAAX,EAAqB,KAAK,KAAL,CAAW,KAAX,EAA1B;AACA,SAAI,KAAK,KAAL,CAAW,WAAX,EAAwB,KAAK,KAAL,CAAW,WAAX,CAAuB,KAAvB,EAA5B;;;;6BAGS;AACT,SAAI,CAAC,KAAK,KAAL,CAAW,MAAX,EAAmB;AACvB,aAAO,8BAAC,iBAAD,EAAuB,KAAK,KAAL,CAA9B,CADuB;MAAxB,MAEO;;;oBACqD,KAAK,KAAL,CADrD;UACE,4BADF;UAC6B,oBAAjB,gBADZ;;UAC2C,2EAD3C;;mBAEuB,KAAK,KAAL,CAFvB;UAEE,mBAFF;UAEQ,iBAFR;UAEa,qBAFb;;AAGN,UAAM,QAAQ,KAAK,KAAL,CAAW,UAAX,GAAwB,CAAxB,GAA4B,CAA5B,CAHR;;AAKN,UAAM,YAAY,yBAAU,eAAV,gDAChB,aAAc,KAAK,KAAL,CAAW,SAAX,+BACd,cAAe,KAAK,KAAL,CAAW,UAAX,cAFC,EAGf,SAHe,CAAZ,CALA;;AAUN,UAAM,YAAY,wBAAS;AAC1B,oCAA0B,CAAC,KAAD,GAAS,CAAT,GAAa,IAAb,cAAwB,CAAC,KAAD,GAAS,CAAT,GAAa,GAAb,sBAAgC,WAAlF;OADiB,EAEf,EAAC,YAAD,EAAQ,QAAQ,KAAR,EAFO,CAAZ,CAVA;;AAcN,aACC;AAAC,wBAAD;oBAAuB,SAAO,aAAa,KAAK,eAAL,GAA3C;OACE,WAAW,QAAX,GAAsB,IAAtB;OACD;;mBAAM,eAAY,QAAZ,EAAqB,WAAU,QAAV,IAAuB,MAAlD;QACC,wCAAM,KAAI,QAAJ,EAAa,MAAK,QAAL,EAAc,WAAW,SAAX,EAAsB,OAAO,SAAP,EAAvD,CADD;QAFD;OADD,CAdM;MAFP;;;;UAtEW;IAAyB,gBAAM,SAAN,UAC9B,YAAY;AAClB,aAAU,iBAAU,GAAV;AACV,aAAU,iBAAU,IAAV;AACV,WAAQ,iBAAU,IAAV;AACR,mBAAgB,iBAAU,IAAV;AAChB,oBAAiB,iBAAU,MAAV;AACjB,iBAAc,iBAAU,MAAV;AACd,gBAAa,iBAAU,IAAV;YAGP,eAAe;AACrB,aAAU,KAAV;AACA,WAAQ,IAAR;AACA,mBAAgB,eAAhB;AACA,oBAAiB,gBAAjB;AACA,iBAAc,aAAd;UAhBF,CAD+B;EAAzB,CARyB;CAAlB;;kBA6GA","file":"Ripple.js","sourcesContent":["import React, {PropTypes} from 'react';\nimport ReactDOM from 'react-dom';\nimport KlassName from 'teapan/klassName';\nimport prefixer from '../../helper/prefixer';\n\nconst defaultProps = {\n  centered: false,\n  className: '',\n  spread: 2\n};\n\nconst Ripple = (options = {}) => {\n\tconst {\n\t\tcentered: defaultCentered,\n\t\tclassName: defaultClassName,\n\t\tspread: defaultSpread,\n\t\t...props\n\t} = {...defaultProps, ...options};\n\n\treturn ( ComposedComponent ) => {\n\t\treturn class RippledComponent extends React.Component {\n\t\t\tstatic propTypes = {\n\t\t\t\tchildren: PropTypes.any,\n\t\t\t\tdisabled: PropTypes.bool,\n\t\t\t\tripple: PropTypes.bool,\n\t\t\t\trippleCentered: PropTypes.bool,\n\t\t\t\trippleClassName: PropTypes.string,\n\t\t\t\trippleSpread: PropTypes.number,\n\t\t\t\tonMouseDown: PropTypes.func,\n\t\t\t};\n\n\t\t\tstatic defaultProps = {\n\t\t\t\tdisabled: false,\n\t\t\t\tripple: true,\n\t\t\t\trippleCentered: defaultCentered,\n\t\t\t\trippleClassName: defaultClassName,\n\t\t\t\trippleSpread: defaultSpread\n\t\t\t};\n\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\t\t\t\tthis.state = {\n\t\t\t\t\tactivated: false,\n\t\t\t\t\trestarting: false,\n\t\t\t\t\tleft: null,\n\t\t\t\t\ttop: null,\n\t\t\t\t\twidth: null\n\t\t\t\t};\n\t\t\t\tthis.handleEnd = this.handleEnd.bind(this);\n\t\t\t\tthis.start = this.start.bind(this);\n\t\t\t\tthis.handleMouseDown = this.handleMouseDown.bind(this);\n\t\t\t}\n\n\t\t\thandleEnd() {\n\t\t\t\tdocument.removeEventListener(this.touch ? 'touchend' : 'mouseup', this.handleEnd);\n\t\t\t\tthis.setState({activated: false});\n\t\t\t}\n\n\t\t\tstart({pageX, pageY}, touch = false) {\n\t\t\t\tif (!this._isTouchRippleReceivingMouseEvent(touch)) {\n\t\t\t\t\tthis.touch = touch;\n\t\t\t\t\tdocument.addEventListener(this.touch ? 'touchend' : 'mouseup', this.handleEnd);\n\t\t\t\t\tconst {top, left, width} = this._getDescriptor(pageX, pageY);\n\t\t\t\t\tthis.setState({activated: false, restarting: true, top, left, width}, () => {\n\t\t\t\t\t\tthis.refs.ripple.offsetWidth;\n\t\t\t\t\t\tthis.setState({activated: true, restarting: false});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_isTouchRippleReceivingMouseEvent(touch) {\n\t\t\t\treturn this.touch && !touch;\n\t\t\t}\n\n\t\t\t_getDescriptor (pageX, pageY) {\n\t\t\t\tconst {left, top, height, width} = ReactDOM.findDOMNode(this).getBoundingClientRect();\n\t\t\t\tconst {rippleCentered: centered, rippleSpread: spread} = this.props;\n\t\t\t\treturn {\n\t\t\t\t\tleft: centered ? 0 : pageX - left - width / 2 - window.scrollX,\n\t\t\t\t\ttop: centered ? 0 : pageY - top - height / 2 - window.scrollY,\n\t\t\t\t\twidth: width * spread\n\t\t\t\t};\n\t\t\t}\n\n\t\t\thandleMouseDown(event) {\n\t\t\t\tif (!this.props.disabled) this.start(event);\n\t\t\t\tif (this.props.onMouseDown) this.props.onMouseDown(event);\n\t\t\t};\n\n\t\t\trender () {\n\t\t\t\tif (!this.props.ripple) {\n\t\t\t\t\treturn <ComposedComponent {...this.props} />;\n\t\t\t\t} else {\n\t\t\t\t\tconst { children, rippleClassName: className, ...other } = this.props;\n\t\t\t\t\tconst { left, top, width } = this.state;\n\t\t\t\t\tconst scale = this.state.restarting ? 0 : 1;\n\n\t\t\t\t\tconst klassName = KlassName('ripple-effect', {\n\t\t\t\t\t\t['activated']: this.state.activated,\n\t\t\t\t\t\t['restarting']: this.state.restarting\n\t\t\t\t\t}, className);\n\n\t\t\t\t\tconst compStyle = prefixer({\n\t\t\t\t\t\ttransform: `translate3d(${-width / 2 + left}px, ${-width / 2 + top}px, 0) scale(${scale})`\n\t\t\t\t\t}, {width, height: width});\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ComposedComponent {...other} onMouseDown={this.handleMouseDown}>\n\t\t\t\t\t\t\t{children ? children : null}\n\t\t\t\t\t\t\t<span data-teadot='ripple' className='ripple' {...props}>\n\t\t\t\t\t\t\t\t<span ref='ripple' role='ripple' className={klassName} style={compStyle} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ComposedComponent>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n};\n\nexport default Ripple;"]}